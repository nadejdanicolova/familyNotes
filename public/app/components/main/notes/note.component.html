<div class="col-md-6">
    <div class="panel panel-default">
        <div class="panel-heading"
             [ngClass]="{
                'bg-lightgrey': notedata.color === noteColors[colorsEnum.Gray],
                'bg-green': notedata.color == noteColors[colorsEnum.Green],
                'bg-red': notedata.color == noteColors[colorsEnum.Red]
                }"
        >
            <div class="row">
                <div class="col-md-1">
                    <img class="status-image img-polaroid"
                         src={{stateImageUrl}}
                         alt="state image"
                    >
                </div>
                <div class="col-md-9">
                    <h3 class="panel-title"><strong>{{notedata.title}}</strong></h3>
                </div>
                <div class="col-md-2">
                    <p><a routerLink="/profile" routerLinkActive="active">{{notedata.author.username}}</a></p>
                </div>
            </div>

        </div>
        <div class="panel-body">{{notedata.body}}</div>

        <div *ngIf="notedata.isInEditMode" class="panel-body">
            <h4>Edit note</h4>

            <form #editNoteForm="ngForm" class="form-horizontal">
                <div>
                    <label for="input-title">Title</label>
                    <input type="text" id="input-title" name="input-title"
                           ngControl="title"
                           [(ngModel)]="notedata.title"
                    >
                </div>

                <div>
                    <label for="input-body">Body Text</label>
                    <textarea rows="5" type="text" id="input-body" name="input-body"
                              ngControl="body"
                              [(ngModel)]="notedata.body"
                    ></textarea>
                </div>

                <div>
                    <button type="button" class="btn btn-xs btn-default" (click)="toggleShowMoreOptions()"><i class="icon-pencil"></i>
                        <span *ngIf="showMoreOptions">Hide more options</span>
                        <span *ngIf="!showMoreOptions">Show more options</span>
                    </button>
                </div>

                <div *ngIf="showMoreOptions">
                    <label for="input-expire-date">Expire Date</label>
                    <input type="text" id="input-expire-date" name="input-expire-date"
                           ngControl="expireDate"
                           [(ngModel)]="notedata.expireDate"
                    >
                </div>

                <div *ngIf="showMoreOptions">
                    <label for="select-color">Not color</label>
                    <select id="select-color" name="select-color"
                        [(ngModel)]="notedata.color"
                        (change)="changeColor($event.target.value)"
                    >
                        <option *ngFor="let nColor of noteColors" [ngValue]="nColor">{{nColor}}</option>
                    </select>

                </div>
            </form>
        </div>

        <div class="panel-footer">
                <select id="select-state" name="select-state"
                    [(ngModel)]="notedata.state.name"
                    (change)="changeNoteState($event.target.value)"
                >
                    <option *ngFor="let nState of noteStates" [value]="nState">{{nState}}</option>
                </select>
            <button *ngIf="notedata.areUnsavedChanges" type="button" class="btn btn-xs btn-success" (click)="save()"><i class="icon-save"></i> Save</button>
            <button *ngIf="!notedata.areUnsavedChanges" type="button" class="btn btn-xs btn-default" (click)="save()"><i class="icon-save"></i> Save</button>
            <button type="button" class="btn btn-xs btn-default" (click)="toggleEdit()"><i class="icon-pencil"></i>
                <span *ngIf="notedata.isInEditMode">Done editing</span>
                <span *ngIf="!notedata.isInEditMode">Edit</span>
            </button>
            <button type="button" class="btn btn-xs btn-danger" (click)="toggleDelete()">
                <span *ngIf="notedata.isDeleted">Cancel delete</span>
                <span *ngIf="!notedata.isDeleted">Delete</span>
            </button>
        </div>
    </div>
</div><!-- /.col-sm-4 -->
